/*! bzModel v0.1.0 by Vitalii Savchuk(esvit666@gmail.com) - https://github.com/esvit/bz-model - New BSD License */
!function(a,b){return"function"==typeof define&&define.amd?void define(["angular"],function(a){return b(a)}):b(a)}(angular||null,function(a){var b=a.module("bzModel",[]),c=a.module("bzModelResource",["bzModel","ngResource"]),d=a.module("bzModelElastic",["bzModel","elasticsearch"]),e=function(b,c){if(a.isArray(b)){var d=[];return a.forEach(b,function(a){d.push(new c(a))}),d}return a.isObject(b)?new c(b):b};b.provider("bzModel",[function(){this.$get=["$q","$log",function(b){return function(){var c=Array.prototype.slice.call(arguments||[]),d=c[0]||{},e=c.splice(1),f=function(b){a.extend(this,d||{}),a.extend(this,d.$defaults||{}),this.$initialize(),a.extend(this,b||{})};return a.forEach(e,function(c){a.isFunction(c.attachToModel)&&c.attachToModel(f,b)}),f.prototype.$initialize=d.$initialize||f.prototype.$initialize||a.noop,f.prototype.toJSON=function(){var b=a.extend({},this);return delete b.$promise,delete b.$resolved,delete b.$defaults,delete b.$initialize,b},f}}]}]);var f=function(b){this.$wrap=e,this.attachToModel=function(c,d){a.forEach(b,function(f,g){b.hasOwnProperty(g)&&(c[g]=function(f,h,i){var j=d.defer(),k=Array.prototype.slice.call(arguments||[]),l=null,m=function(a){a=e(a,c),l(a),j.resolve(a)};switch(k.length){case 4:l=i,k[2]=m;case 3:case 2:if(!a.isFunction(h)){l=i,k[2]=m;break}if(a.isFunction(f)){l=f,k[0]=m;break}l=h,k[1]=m;case 1:a.isFunction(f)&&(l=f,k[0]=m)}var n=b[g].apply(this,k);return n.$promise.catch(function(a){j.reject(a)}),j.promise})}),a.forEach(b.prototype,function(e,f){b.prototype.hasOwnProperty(f)&&(c.prototype[f]=function(){var c=d.defer(),e=this,g=Array.prototype.slice.call(arguments||[]),h=a.isFunction(g[0])?g[0]:g[1],i=function(b){a.extend(e,b.toJSON()),e.$resolved=!0,(h||a.noop)(e),c.resolve(e)};a.isFunction(g[0])?g[0]=i:g[1]=i;var j=b.prototype[f].apply(e,g);return j.catch(function(a){c.reject(a)}),c.promise})})}};c.factory("bzModelResource",function(){return f});var g=function(b,c,d){this.$wrap=e,this.attachToModel=function(f,g){var h=this.$parseResponse=function(b,c){return a.forEach(b.hits.hits,function(a){c.push(e(a._source,f))}),c};f.search=f.prototype.$search=function(e){var f=g.defer(),i=[];return i.$promise=f.promise,i.$resolved=!1,a.extend(e,{index:c,type:d}),b.search(e).then(function(a){h(a,i),i.$resolved=!0,f.resolve(i)},function(a){console.trace(a.message)}),i},f.getById=f.prototype.$getById=function(b,c){var d=g.defer(),e=new f({});return e.$promise=d.promise,e.$resolved=!1,this.search({body:{query:{match:{id:b}}}}).$promise.then(function(b){b.length>0&&a.extend(e,b[0]),(c||a.noop)(e),d.resolve(e)},function(a){console.trace(a.message)}),e}}};return d.factory("bzModelElastic",function(){return g}),b});
//# sourceMappingURL=bz-model.map